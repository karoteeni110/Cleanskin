<opml version="2.0">
  <head>
    <title>Missing measurements on RIPE Atlas</title>
    <abstract>We show that it is common to lose some datapoints for measurements
scheduled at regular interval on RIPE Atlas. The temporal correlation
between missing measurements and connection events are analyzed, in the
pursuit of understanding reasons behind such missings. To our surprise,
a big part of measurements are lost while probes are connected. </abstract>
  </head>
  <body>
<outline _note="RIPE Atlas, a public measurement platform, enables various application such as performance monitoring&#160;, anomalies detection&#160;, peering and IXP measurements&#160; etc. As it continues to gain popularity among network operators and researchers, its measurement quality becomes a natural concern. It is now known that load have obvious impacts on measurement precision and scheduling&#160;.  We focus on data completeness, another aspect of measurement quality that received less attention so far. Missing measurements can cause various undesired consequences. Apart from widening confidence interval of inference&#160;, it requires in general methodological adaptations, e.g. in spectrum analysis&#160;, otherwise biased estimation would be expected&#160;. One obvious reason of missing is that the probe is not running (properly), e.g. power off&#160;. As long as a probe is powered, it tries to maintain a connection to a controller to report measurements and receive assignments. Therefore the probe connection activity provides a good indication of the probe availability, and is used in current investigation conducted by RIPE on probe OS stability&#160;.  In order to infer other possible causes, we crossed the measurement timestamps with the moments probe connects to and disconnects from a Atlas controller. If measurement missing coincides with the probe disconnection, chances are that the probe is dysfunctional during the missing. However, if measurements are lost while the probe is well connected, something &#8216;abnormal&#8217; should be expected, beyond the known probe OS issue." text="Introduction">
</outline>
<outline _note="We observed the RIPE Atlas platform for one month, from 2016-06-01 to 2016-07-01 UTC. All the v3 probes first connected before the beginning date (11613 of them) are considered. Connection events (id 7000) and built-in Ping measurements to DNS b-root (id 1010), a highly available destination, are collected&#160;. Controllers and the ping destination are not within the same network. Controller logs the moments at which probes connects to and disconnects from it. The built-in ping measurement is scheduled on every probe at 4min interval. 10800 ping results are thus expected from each probe within the month. 7353 probes, out of the available 11613, had Ping measurements during this period." text="Data collection">
</outline>
<outline _note="4440 probes (60.4%) miss no more than 2 datapoints, which is totally legitimate, as random jitter is added to each single measurement to avoid synchronization among probes. For the rest, the missing length spans a wide range according to Fig.&#160; . 1358 (18.5%) probes miss more than 10% of the total measurements (i.e. 72 hours over a month)." text="Missing at first glance">
</outline>
<outline _note="Several reasons may contribute to the disconnection of a probe to its controller: 1) probe not working (properly); 2) network issues preventing the connection; 3) controller not available, e.g. during maintenance&#160;. Meanwhile, the last two reasons shall not prevent a probe from performing built-in measurements, as the results can be unreachable or timeout, and be stored locally on the probe&#160;. That is to say, MISSING DOES NOT NECESSARILY OCCUR WHEN PROBE IS DISCONNECTED, BUT IS UNEXPECTED WHILE PROBE IS CONNECTED.We count, for each missing segment, the number of missing measurements that occurred during a connected period. We obtain the OVERLAP RATIO by dividing this count by the length of missing segments. The distribution of overlap ratio is concentrated at the two ends, 0 and 1. For the convenience of illustration, we cut missing segments into two groups, one with overlap ratio , denoted as SHIFTED, the other with the rest, denoted as OVERLAPPED. Measurement missing that overlaps connected period is &#8216;unexpected&#8217;.  The two groups demonstrate different length distribution profiles, Fig.&#160; . 15391 missing segments are observed. 10292 (66.87%) missing segments are overlapped with connected period. They are mostly short in length. 5560 of them last no more than 2 measurements. One possible explanation is that these measurements are skipped due to scheduling or load issues&#160;. Meanwhile, 2490 of them are equal to or longer than 1 hour, involving only 620 probes, for which we believe that the previous explanation hardly applies. Missing segments shifted from connected period are more likely to be long. This is possibly due to the v3 probe OS stability issue still under investigation. It is known to be responsible for long term probe disconnection and requires manual operation to recover the probe&#160;. &#10;To obtain a subtler view, we seek to find out: when do measurements begin to be lost and when are they recovered? Are these moments close to connection events?  First, we define the LEFT EDGE as the last measurement before a period of measurement absence, and the RIGHT EDGE, accordingly, the first measurement after recovery. We then calculate the time interval separating these edges and the closest connection events. We also identify the nature of these events, and mark &#8216;D/C&#8217; for disconnection, &#8216;C&#8217; for connection.  1284 missing segments locate at the beginning or the end of the observation period. They are unavailable for this analysis as only one edge can be observed. For the rest with both edges, 5793 missing segments&#8217; left edge is closer to a disconnection event and the right edge is closer to a connection event, according to Fig.&#160;  sub-graph (D/C, C). Judging from the density contour, last measurement most likely precedes disconnection by a Ping interval (4min), and recovery tends to take place 4 minute after the connection. Such strong correlation with probe disconnected period indicates that probe dysfunction is probably the cause.  However, the beginning of such missing segments (D/C, C) can as well be dislocated from disconnection event. At the left end of the graph, measurements are lost long before the disconnection, which we find &#8216;abnormal&#8217;, even though the recovery is near connection.  To the right end, measurements only begin to be lost a long time after the probe is disconnected. One possible explanation is that measurements are first stored locally after disconnection from controller&#160;. Then new measurements are lost after local storage is full.  Contrary to the compact distribution in (D/C, C) sub-graph, the majority of the rest missing segments spreads along the time axis. The distances from left and right edge to connection events are highly correlated, suggesting that both left and right edges are on the same side of a same connection event. We note that these measurements were mostly lost while probes were well connected, i.e. overlapped. &#10;" text="Cross with connection events">
  </outline>
<outline _note="In our analysis covering a large number of probes over one month, only 60% of v3 Atlas probes have complete measurements. Around 1/3 missing segments appear to closely correlated to disconnected period. The probe OS stability issue might have contributed to such missings, as suggested by the heavy tail of the missing lengths.  However, the remaining 2/3 of missings occurred while probes are connected. Half of them are no more than 2 measurements in length, and are thus likely to be caused by scheduling issues. However, around 25% of this category lasts long(). The reason of such an unexpected behavior is still to be determined." text="Conclusion">
</outline>
  </body>
</opml>