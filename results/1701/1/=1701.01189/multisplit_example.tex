\begin{tikzpicture}
\def\recX{0.45}
\def\recY{0.45}
\def\idx{1}
\def\dx{0.45}
\def\deltaY{1.0}
\def\offsetX{-1.0}
\def\sortedKeys{{1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16}}
\def\inputKeys{{9, 12, 4, 11, 3, 5, 16, 2, 1, 10, 13, 6, 15, 8, 14, 7}}
\def\primeKeys{{11, 3, 5, 2, 13, 7, 9, 12, 4, 16, 1, 10, 6, 15, 8, 14}}
\def\multisplitKeys{{4, 3, 5, 2, 1, 9, 12, 11, 10, 13, 6, 8, 7, 16, 15, 14}} 
% \definecolor{dkblue}{rgb} {0.00,0.33,0.68}


\fill [white!80!black] (\offsetX + 0 * \dx + 0.05, 0.15) rectangle (\offsetX + 0 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 1 * \dx + 0.05, 0.15) rectangle (\offsetX + 1 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 2 * \dx + 0.05, 0.15) rectangle (\offsetX + 2 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!40!black] (\offsetX + 3 * \dx + 0.05, 0.15) rectangle (\offsetX + 3 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!40!black] (\offsetX + 4 * \dx + 0.05, 0.15) rectangle (\offsetX + 4 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!40!black] (\offsetX + 5 * \dx + 0.05, 0.15) rectangle (\offsetX + 5 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 6 * \dx + 0.05, 0.15) rectangle (\offsetX + 6 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 7 * \dx + 0.05, 0.15) rectangle (\offsetX + 7 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 8 * \dx + 0.05, 0.15) rectangle (\offsetX + 8 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 9 * \dx + 0.05, 0.15) rectangle (\offsetX + 9 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!40!black] (\offsetX + 10 * \dx + 0.05, 0.15) rectangle (\offsetX + 10 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 11 * \dx + 0.05, 0.15) rectangle (\offsetX + 11 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 12 * \dx + 0.05, 0.15) rectangle (\offsetX + 12 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 13 * \dx + 0.05, 0.15) rectangle (\offsetX + 13 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!80!black] (\offsetX + 14 * \dx + 0.05, 0.15) rectangle (\offsetX + 14 * \dx + \recX - 0.05, \recY + 0.15);
\fill [white!40!black] (\offsetX + 15 * \dx + 0.05, 0.15) rectangle (\offsetX + 15 * \dx + \recX - 0.05, \recY + 0.15);

\fill [black!20!green] (\offsetX + 0 * \dx + 0.05, -0.15) rectangle (\offsetX + 0 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 1 * \dx + 0.05, -0.15) rectangle (\offsetX + 1 * \dx + \recX - 0.05, \recY +-0.15);
\fill [green!40!white] (\offsetX + 2 * \dx + 0.05, -0.15) rectangle (\offsetX + 2 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 3 * \dx + 0.05, -0.15) rectangle (\offsetX + 3 * \dx + \recX - 0.05, \recY - 0.15);
\fill [green!40!white] (\offsetX + 4 * \dx + 0.05, -0.15) rectangle (\offsetX + 4 * \dx + \recX - 0.05, \recY - 0.15);
\fill [green!40!white] (\offsetX + 5 * \dx + 0.05, -0.15) rectangle (\offsetX + 5 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!60!green] (\offsetX + 6 * \dx + 0.05, -0.15) rectangle (\offsetX + 6 * \dx + \recX - 0.05, \recY - 0.15);
\fill [green!40!white] (\offsetX + 7 * \dx + 0.05, -0.15) rectangle (\offsetX + 7 * \dx + \recX - 0.05, \recY - 0.15);
\fill [green!40!white] (\offsetX + 8 * \dx + 0.05, -0.15) rectangle (\offsetX + 8 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 9 * \dx + 0.05, -0.15) rectangle (\offsetX + 9 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 10 * \dx + 0.05,- 0.15) rectangle (\offsetX + 10 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 11 * \dx + 0.05,- 0.15) rectangle (\offsetX + 11 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!60!green] (\offsetX + 12 * \dx + 0.05,- 0.15) rectangle (\offsetX + 12 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 13 * \dx + 0.05,- 0.15) rectangle (\offsetX + 13 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!60!green] (\offsetX + 14 * \dx + 0.05,- 0.15) rectangle (\offsetX + 14 * \dx + \recX - 0.05, \recY - 0.15);
\fill [black!20!green] (\offsetX + 15 * \dx + 0.05,- 0.15) rectangle (\offsetX + 15 * \dx + \recX - 0.05, \recY - 0.15);

\foreach \x in {0,...,15}
	\fill [white] (\offsetX + \x * \dx,0 * \recY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY);

\foreach \x in {0,...,15}
	\draw [black, thick] (\offsetX + \x * \dx,0 * \recY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY) node[pos=0.5]{\pgfmathparse{\inputKeys[\x]}\pgfmathresult} ;
\draw [] (-1.75,\recY/2) node{\scriptsize {Input keys}};
%%%

\foreach \x in {0,...,5}
	\fill [white!40!black] (\offsetX + \x * \dx,0 * \recY - \deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - \deltaY);

\foreach \x in {6,...,15}
	\fill [white!80!black] (\offsetX + \x * \dx,0 * \recY - \deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - \deltaY);	 

\foreach \x in {0,...,15}
	\draw [black, thick] (\offsetX + \x * \dx,0 * \recY - \deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - \deltaY) node[pos=0.5]{\pgfmathparse{\primeKeys[\x]}\pgfmathresult};

\draw [] (-1.75,\recY/2 - \deltaY) node{\scriptsize {(a) multisplit}};
%%%

\foreach \x in {0,...,4}
	\fill [green!40!white] (\offsetX + \x * \dx,0 * \recY - 2*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - 2*\deltaY);	 

\foreach \x in {5,...,12}
	\fill [black!20!green] (\offsetX + \x * \dx,0 * \recY - 2*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - 2*\deltaY);	 

\foreach \x in {13,...,15}
	\fill [black!60!green] (\offsetX + \x * \dx,0 * \recY - 2*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - 2*\deltaY);	 

\foreach \x in {0,...,15}
	\draw [black, thick] (\offsetX + \x * \dx,0 * \recY - 2*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - 2*\deltaY) node[pos=0.5]{\pgfmathparse{\multisplitKeys[\x]}\pgfmathresult};

\draw [] (-1.75,\recY/2 - 2*\deltaY) node{\scriptsize{(b) multisplit}};

%%%
\fill [white!80!black] (\offsetX + 0 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 0 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 1 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 1 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 2 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 2 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 3 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 3 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 4 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 4 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 5 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 5 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 6 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 6 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 7 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 7 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 8 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 8 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 9 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 9 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 10 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 10 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 11 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 11 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!40!black] (\offsetX + 12 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 12 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 13 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 13 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 14 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 14 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);
\fill [white!80!black] (\offsetX + 15 * \dx + 0.05, 0.15- 3*\deltaY) rectangle (\offsetX + 15 * \dx + \recX - 0.05, \recY + 0.15- 3*\deltaY);

\fill [green!40!white] (\offsetX + 0 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 0 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [green!40!white] (\offsetX + 1 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 1 * \dx + \recX - 0.05, \recY +-0.15- 3*\deltaY);
\fill [green!40!white] (\offsetX + 2 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 2 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [green!40!white] (\offsetX + 3 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 3 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [green!40!white] (\offsetX + 4 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 4 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 5 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 5 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 6 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 6 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 7 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 7 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 8 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 8 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 9 * \dx + 0.05, -0.15- 3*\deltaY) rectangle (\offsetX + 9 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 10 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 10 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 11 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 11 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!20!green] (\offsetX + 12 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 12 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!60!green] (\offsetX + 13 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 13 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!60!green] (\offsetX + 14 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 14 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\fill [black!60!green] (\offsetX + 15 * \dx + 0.05,- 0.15- 3*\deltaY) rectangle (\offsetX + 15 * \dx + \recX - 0.05, \recY - 0.15- 3*\deltaY);
\foreach \x in {0,...,15}
	\fill [white] (\offsetX + \x * \dx,0 * \recY - 3*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY- 3*\deltaY);

\foreach \x in {0,...,15}
	\draw [black, thick] (\offsetX + \x * \dx,0 * \recY - 3*\deltaY) rectangle (\offsetX + \x * \dx + \recX, 0 * \recY + \recY - 3*\deltaY) node[pos=0.5]{\pgfmathparse{\sortedKeys[\x]}\pgfmathresult};

\draw [] (-1.75,\recY/2 - 3*\deltaY) node{\scriptsize{(c) Sort}};

\draw [black, thick, dotted] (\offsetX + 0*\dx, -2*\deltaY) -- (\offsetX + 0*\dx, -3*\deltaY);
\draw [black, dotted, thick] (\offsetX + 5*\dx, -2*\deltaY) -- (\offsetX + 5*\dx, -3*\deltaY);
\draw [black, dotted, thick] (\offsetX + 13*\dx, -2*\deltaY) -- (\offsetX + 13*\dx, -3*\deltaY);
\draw [black, dotted, thick] (\offsetX + 16*\dx, -2*\deltaY) -- (\offsetX + 16*\dx, -3*\deltaY);
%% drawing arrows:
\draw [thick, black, ->] (\offsetX + 15*\dx + \recX, \recY/2 - 0.1) -- (\offsetX + 15*\dx + \recX + 0.5, \recY/2 - 0.1) -- (\offsetX + 15*\dx + \recX + 0.5, \recY/2 - \deltaY) -- (\offsetX + 15*\dx + \recX, \recY/2 - \deltaY);

\draw [thick, black, ->] (\offsetX + 15*\dx + \recX, \recY/2) -- (\offsetX + 15*\dx + \recX + 0.6, \recY/2) -- (\offsetX + 15*\dx + \recX + 0.6, \recY/2 - 2*\deltaY) -- (\offsetX + 15*\dx + \recX, \recY/2 - 2*\deltaY);

\draw [thick, black, ->] (\offsetX + 15*\dx + \recX, \recY/2 + 0.1) -- (\offsetX + 15*\dx + \recX + 0.7, \recY/2 + 0.1) -- (\offsetX + 15*\dx + \recX + 0.7, \recY/2 - 3*\deltaY) -- (\offsetX + 15*\dx + \recX, \recY/2 - 3*\deltaY);

%%% Drawing bucket legend:
\def\blockX{3.0}
\def\blockY{0.45}
\def \sepY{0.60}
\def\sepX{15 * \dx + 1}

\fill [white!40!black] (\sepX + 0, 0 * \blockY) rectangle (\sepX + 1*\blockX, 1*\blockY); 
\draw [black, thick] (\sepX + 0, 0 * \blockY) rectangle (\sepX + 1*\blockX, 1*\blockY) node[pos=0.5]{\scriptsize $B_\text{prime} = \{k: k \text{ is prime}\}$};

\fill [white!80!black] (\sepX + 0, 0 * \blockY - \sepY) rectangle (\sepX + 1*\blockX, 1*\blockY - \sepY); 
\draw [black, thick] (\sepX + 0, 0-\sepY) rectangle (\sepX + \blockX, \blockY - \sepY) node[pos=0.5]{\scriptsize $B_\text{composite} = \{k: k \not\in B_\text{prime} \}$};

\fill [green!40!white] (\sepX + 0, 0 * \blockY - 3*\sepY) rectangle (\sepX + 1*\blockX, 1*\blockY - 3*\sepY); 
\draw [black, thick] (\sepX + 0, 0-3*\sepY) rectangle (\sepX + \blockX, \blockY - 3*\sepY) node[pos=0.5]{\scriptsize $B_\text{0} = \{k: k < 6\}$};

\fill [black!20!green] (\sepX + 0, 0 * \blockY - 4*\sepY) rectangle (\sepX + 1*\blockX, 1*\blockY - 4*\sepY); 
\draw [black, thick] (\sepX + 0, 0-4*\sepY) rectangle (\sepX + \blockX, \blockY - 4*\sepY) node[pos=0.5]{\scriptsize $B_\text{1} = \{k: 6 \leq k < 14\}$};

\fill [black!60!green] (\sepX + 0, 0 * \blockY - 5*\sepY) rectangle (\sepX + 1*\blockX, 1*\blockY - 5*\sepY); 
\draw [black, thick] (\sepX + 0, 0-5*\sepY) rectangle (\sepX + \blockX, \blockY - 5*\sepY) node[pos=0.5]{\scriptsize $B_\text{2} = \{k: 14 \leq k\}$};

\end{tikzpicture}

