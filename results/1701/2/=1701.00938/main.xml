<?xml version="1.0" encoding="UTF-8"?>
<opml version="2.0">
  <head>
    <title>Missing measurements on RIPE Atlas</title>
    <abstract>We show that it is common to lose some datapoints for measurements
scheduled at regular interval on RIPE Atlas. The temporal correlation
between missing measurements and connection events are analyzed, in the
pursuit of understanding reasons behind such missings. To our surprise,
a big part of measurements are lost while probes are connected. </abstract>
  </head>
  <body>
<outline text="Introduction" _note="RIPE Atlas, a public measurement platform, enables various application&#10;such as performance monitoring , anomalies detection , peering and IXP&#10;measurements  etc. As it continues to gain popularity among network&#10;operators and researchers, its measurement quality becomes a natural&#10;concern. It is now known that load have obvious impacts on measurement&#10;precision and scheduling .&#10;&#10;We focus on data completeness, another aspect of measurement quality&#10;that received less attention so far. Missing measurements can cause&#10;various undesired consequences. Apart from widening confidence interval&#10;of inference , it requires in general methodological adaptations, e.g.&#10;in spectrum analysis , otherwise biased estimation would be expected .&#10;One obvious reason of missing is that the probe is not running&#10;(properly), e.g. power off . As long as a probe is powered, it tries to&#10;maintain a connection to a controller to report measurements and receive&#10;assignments. Therefore the probe connection activity provides a good&#10;indication of the probe availability, and is used in current&#10;investigation conducted by RIPE on probe OS stability .&#10;&#10;In order to infer other possible causes, we crossed the measurement&#10;timestamps with the moments probe connects to and disconnects from a&#10;Atlas controller. If measurement missing coincides with the probe&#10;disconnection, chances are that the probe is dysfunctional during the&#10;missing. However, if measurements are lost while the probe is well&#10;connected, something ‘abnormal’ should be expected, beyond the known&#10;probe OS issue.">
</outline>
<outline text="Data collection" _note="We observed the RIPE Atlas platform for one month, from 2016-06-01 to&#10;2016-07-01 UTC. All the v3 probes first connected before the beginning&#10;date (11613 of them) are considered. Connection events (id 7000) and&#10;built-in Ping measurements to DNS b-root (id 1010), a highly available&#10;destination, are collected . Controllers and the ping destination are&#10;not within the same network. Controller logs the moments at which probes&#10;connects to and disconnects from it. The built-in ping measurement is&#10;scheduled on every probe at 4min interval. 10800 ping results are thus&#10;expected from each probe within the month. 7353 probes, out of the&#10;available 11613, had Ping measurements during this period.">
</outline>
<outline text="Missing at first glance" _note="4440 probes (60.4%) miss no more than 2 datapoints, which is totally&#10;legitimate, as random jitter is added to each single measurement to&#10;avoid synchronization among probes. For the rest, the missing length&#10;spans a wide range according to Fig. \[fig:miss\_len\]. 1358 (18.5%)&#10;probes miss more than 10% of the total measurements (i.e. 72 hours over&#10;a month).">
</outline>
<outline text="Cross with connection events" _note="Several reasons may contribute to the disconnection of a probe to its&#10;controller: 1) probe not working (properly); 2) network issues&#10;preventing the connection; 3) controller not available, e.g. during&#10;maintenance . Meanwhile, the last two reasons shall not prevent a probe&#10;from performing built-in measurements, as the results can be unreachable&#10;or timeout, and be stored locally on the probe . That is to say, MISSING&#10;DOES NOT NECESSARILY OCCUR WHEN PROBE IS DISCONNECTED, BUT IS UNEXPECTED&#10;WHILE PROBE IS CONNECTED.">
  <outline text="Overlap with connected period" _note="We count, for each missing segment, the number of missing measurements&#10;that occurred during a connected period. We obtain the OVERLAP RATIO by&#10;dividing this count by the length of missing segments. The distribution&#10;of overlap ratio is concentrated at the two ends, 0 and 1. For the&#10;convenience of illustration, we cut missing segments into two groups,&#10;one with overlap ratio , denoted as SHIFTED, the other with the rest,&#10;denoted as OVERLAPPED. Measurement missing that overlaps connected&#10;period is ‘unexpected’.&#10;&#10;The two groups demonstrate different length distribution profiles,&#10;Fig. \[fig:len\_ratio\]. 15391 missing segments are observed. 10292&#10;(66.87%) missing segments are overlapped with connected period. They are&#10;mostly short in length. 5560 of them last no more than 2 measurements.&#10;One possible explanation is that these measurements are skipped due to&#10;scheduling or load issues . Meanwhile, 2490 of them are equal to or&#10;longer than 1 hour, involving only 620 probes, for which we believe that&#10;the previous explanation hardly applies. Missing segments shifted from&#10;connected period are more likely to be long. This is possibly due to the&#10;v3 probe OS stability issue still under investigation. It is known to be&#10;responsible for long term probe disconnection and requires manual&#10;operation to recover the probe .">
  </outline>
  <outline text="Temporal correlation" _note="To obtain a subtler view, we seek to find out: when do measurements&#10;begin to be lost and when are they recovered? Are these moments close to&#10;connection events?&#10;&#10;First, we define the LEFT EDGE as the last measurement before a period&#10;of measurement absence, and the RIGHT EDGE, accordingly, the first&#10;measurement after recovery. We then calculate the time interval&#10;separating these edges and the closest connection events. We also&#10;identify the nature of these events, and mark ‘D/C’ for disconnection,&#10;‘C’ for connection.&#10;&#10;1284 missing segments locate at the beginning or the end of the&#10;observation period. They are unavailable for this analysis as only one&#10;edge can be observed. For the rest with both edges, 5793 missing&#10;segments’ left edge is closer to a disconnection event and the right&#10;edge is closer to a connection event, according to Fig. \[fig:all\]&#10;sub-graph (D/C, C). Judging from the density contour, last measurement&#10;most likely precedes disconnection by a Ping interval (4min), and&#10;recovery tends to take place 4 minute after the connection. Such strong&#10;correlation with probe disconnected period indicates that probe&#10;dysfunction is probably the cause.&#10;&#10;However, the beginning of such missing segments (D/C, C) can as well be&#10;dislocated from disconnection event. At the left end of the graph,&#10;measurements are lost long before the disconnection, which we find&#10;‘abnormal’, even though the recovery is near connection.&#10;&#10;To the right end, measurements only begin to be lost a long time after&#10;the probe is disconnected. One possible explanation is that measurements&#10;are first stored locally after disconnection from controller . Then new&#10;measurements are lost after local storage is full.&#10;&#10;Contrary to the compact distribution in (D/C, C) sub-graph, the majority&#10;of the rest missing segments spreads along the time axis. The distances&#10;from left and right edge to connection events are highly correlated,&#10;suggesting that both left and right edges are on the same side of a same&#10;connection event. We note that these measurements were mostly lost while&#10;probes were well connected, i.e. overlapped.">
  </outline>
</outline>
<outline text="Conclusion" _note="In our analysis covering a large number of probes over one month, only&#10;60% of v3 Atlas probes have complete measurements. Around 1/3 missing&#10;segments appear to closely correlated to disconnected period. The probe&#10;OS stability issue might have contributed to such missings, as suggested&#10;by the heavy tail of the missing lengths.&#10;&#10;However, the remaining 2/3 of missings occurred while probes are&#10;connected. Half of them are no more than 2 measurements in length, and&#10;are thus likely to be caused by scheduling issues. However, around 25%&#10;of this category lasts long(). The reason of such an unexpected behavior&#10;is still to be determined.">
</outline>
  </body>
</opml>