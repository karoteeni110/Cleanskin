<document class="ltx_authors_1line">
  <title>Net Stable Funding Ratio: Impact on Funding Value Adjustment  
  </title><abstract>
     In this paper we investigate the relationship between Funding Value Adjustment (FVA) and Net Stable Funding Ratio (NSFR). FVA is defined in a consistent way with NSFR such that the new framework of FVA monitors the costs due to keeping NSFR at an acceptable level, as well.
In addition, the problem of choosing the optimal funding strategy is formulated as a shortest path problem where the proposed FVA framework is applied in the optimization process. The solution provides us with the optimal funding decisions that lead to the minimum funding cost of the transaction. We also provide numerical experiments for FVA calculation and optimization problem. 
  </abstract><keywords> FVA, NSFR, Shortest Path Problem 
  </keywords><section title=" Introduction &#10;    ">
      The Basel Committee on Banking Supervision (BCBS) introduced the   in 2010 and the final standards were published in October 2014. NSFR is a measure designed to compare a firm&#8217;s available stable funding (ASF) to its required stable funding (RSF).
NSFR is defined based on the liquidity characteristics of the firm&#8217;s assets and activities and the aim is to ensure that the firm holds a minimum amount of stable funding over a one year horizon.
NSFR will become a minimum standard by   January 2018. So
Banks and other financial institutions will be required to
take it into account to reduce funding risks originating from lack of liquidity. In fact NSFR is a complementary for Liquidity Coverage Ratio (LCR) which is a short term measure that requires banks to hold enough high quality liquid assets in order to survive under stressed conditions within 30 days time horizon. 
     
      The NSFR is defined as the amount of available stable funding relative to the amount of required stable funding: 
      which should always be equal or greater than 1. 
     
      ASF refers to those types of equity and liability that are supposed to provide stable sources of funding over one year time horizon. ASF is calculated by first assigning the carrying value of a firm&#8217;s equity and liability to one of the specified categories and then multiply each assigned value by a weight which is already defined in NSFR standards (see Figure  ). The total ASF is the sum of weighted amounts. 
     
      RSF, on the other hand, measures different assets in terms of the proportion of stable funding required to support them. Similar to the ASF case, the total RSF is calculated as the sum of the value of assets multiplied by a specific weigh assigned to each particular asset type. Figure   shows ASF and RSF weights for different categories of assets and liabilities. 
     
      The idea behind introducing NSFR is to restrict
over-reliance on short-term funding and promote banks to have better assessment of liquidity risk across all on- and off-balance sheet items (see   for more details). 
    <subsection title=" Funding Value Adjustment (FVA) &#10;      ">
        FVA mostly reflects the costs of collateral that banks post to hedge uncollaterallized derivatives. This cost increased rapidly after financial crisis and this raise encouraged banks to pay attention to funding valuation adjustment in addition to CVA and DVA. 
       
        Different structures for FVA formulation has been discussed so far (see  ),for example,
equation ( ) refers to FCA (Funding Cost Adjustment) introduced in  : 
       
        where   denotes risk-neutral expectation,   is the e value of the   unsecured
netting set,   is the bank&#8217;s funding rate defined as   and   is the
bank&#8217;s funding spread over the LIBOR rate.
We see that the positive value of portfolio incorporates the funding cost and the possibility
of bank default is ignored. The implementation of the above methodology is done in section   and the results are compared to our proposed approach. 
       
        In a very simplified manner, a derivative desk of a financial institution, e.g. a bank, sells derivative securities to clients while hedging them with other dealers. This operations bring a cost to the bank which can be provided by different sources (in most cases by a debt from the market).
These operations impact the bank&#8217;s liquidity profile, measured by NSFR.
We would like to define FVA such that it monitors the NSFR costs, as well. 
       
        Also the problem of choosing the best funding strategy at each time step (within the lifetime of the contract) is disscussed. In fact, we show that this problem leads to an optimization problem which can be formulated by a shortest path problem. By solving this problem one can obtain the funding strategy that leads to minimum funding cost. 
       
        We consider a simple model to establish our framework (see Figure  ). Suppose that bank enters into an interest rate swap with a client without CSA and hedge the OTC by a back-to-back swap with interbank which is collateralized. The required fund for posted collateral and initial margin is borrowed from market.Next section describes the mechanism of FVA for this toy model, also we discuss the structure of optimization problem in more details. 
      </subsection></section><section title=" Methodology &#10;    ">
      Consider the model described in Figure  , the NSFR calculation for this model can be easily done using the table in Figure  . The ASF calculation includes multiplying regulatory capital (Reg.Cap) and the debt (D) by their associated weights, so 
      where 
      Also the RSF can be calculated in the same way: 
      and then the value of NSFR is obtained from  . 
     
      Now the objective is to manage NSFR such that it remains at the desired level. It can be seen from the ASF and RSF calculations that the only viable modification that one can do is to adjust  , both in terms of amount and the maturity time and the aim is to keep the NSFR level at 1. At this stage we assume that   is fixed during the life time of the swap which means that the maturity of the debt is considered to be same for all payment dates. Then the amount of debt can be easily calculated by forcing NSFR to be equal to  : 
      So we can find   in the above equation as : 
       
      The core idea of the proposed methodology is that costs of NSFR should be included in the total funding cost of a transaction. So we define the new formula as : 
      where   refers to the costs due to keeping NSFR at  , and   shows the funding costs due to the posted collateral: 
      It can be seen that when
  (the debt borrowed from the market covers the posted collateral) then   is disappeared from the total FVA. 
     
      In order to calculate ( ) and ( ) we need to compute   at each time step. Also the maturity of the debt at each payment date should be specified. The amount of   is obtained from ( ) while the maturity time of the debt is a decision made by bank. So the problem of choosing the best debt&#8217;s maturity is so important in FVA calculations and as we will show in the following, it leads to an optimization problem. 
     
      Now we briefly introduce the dynamic programming structure. Here we only consider discrete-time models and explain how it is applied in our case, for more technical details see   and  . 
     
      Dynamic Programming (DP) is a powerful optimization principle which is widely used in a variety of problems. One of the applications of DP is to find the shortest path in a network. A network consists of a set of nodes and a set of arcs joining pairs of nodes. Each arc is labeled by a number that can be interpreted as the arc length (cost). The purpose is to find the path between the first node and the terminal node that has the total minimum length. Running a Monte-Carlo simulation for each possible path provides a good estimation of the expected length of the path. 
    <subsection title=" The Shortest Path Problem &#10;      ">
        Suppose that   shows the length of the shortest path from node   to the terminal node, if   shows the set of all node indexes then 
        where   is the cost of going from node   to all its immediate successors   and   is the optimal cost of going from   to the terminal node.
The above equation is a recursive problem with the boundary condition of  , where   is the index of the last node. 
       
        The goal is to find the value function   for the initial node which is obtained by further decomposing of  . 
       
        Lets   shows the state variable and   shows the decision variable, then the cost is a function of the decision   made at state   (shown by   in ( )).
The problem of finding the shortest path (minimum cost) is formulated as follows: 
         
        In other words, making the decision   at state   causes the cost   and we would like to minimize the expected cost incurred over a given planning horizon which is done by going backward from the terminal node. 
      </subsection></section><section title=" Numerical Experiments &#10;    ">
      Suppose that the derivative in Figure   is an interest rate swap where the bank agrees to pay   per annum (with semiannual compounding) and receives 6-month LIBOR on a notional principle of   million, with the maturty of   years. 
     
      In this example the LIBOR rate   is simulated by Vasicek interest rate model starting from   rate, also   shows the bank&#8217;s funding rate where  .
The calculation for valuing the swap in terms of bonds is done using the method explained in  , chapter 7. 
     
      In order to calculate NSFR measure, we need to first calculate ASF and RSF for all simulated paths and all time steps. Then divide them for each simulated path and all time steps to get the NSFR values of that specific path. Finally the expected NSFR values are obtained by averaging over all the simulated paths at each time step. In order to prevent the NSFR values to become infinity (or a very large value) we need to define a boundary for RSF. In this example we suppose   whenever it
goes below  . 
     
      The debt applied in ASF calculation is obtained from the following standard assumption: 
       
      Figure   shows variations of the expected NSFR value during the life time of the derivative where the debt in ASF calculation is obtained from the standard approach of ( ). It can be seen that NSFR is increasing gradually from around   and finally reaches above one in the last six month of the swap.
Whenever NSFR is less than one, bank needs more debt in order to raise its level. The total amount of debt required to both increase the level of NSFR and to cover the posted collateral has been defined in ( ). We use this new amount of debt to calculate FVA from our proposed method in ( ). 
     
      Also Figure   provides statistical information regarding the distribution of NSFR. The heatmap reveals the bimodal nature of the NSFR distribution with the dominant peak close to the expected value and a smaller peak close to zero. When the time increases, the distribution of NSFR becomes heavy-tailed as such the expected NSFR (dashed-black line) takes some distance from the dominant peak. This is due to enhancement of variance in each time step.The exponential growth of the variance of NSFR fluctuation with time is obvious from the Figure   ( &#160;solid gray lines and their exponential fit as dotted gray lines) 
     
      In the following we provide a comparison between FVA values obtained from equation ( ) and our proposed approach in ( ) (see Table  ). We assume spread is   so the bank&#8217;s funding rate is  , also all model parameters are assumed to be equal for both methods. It can be seen that our proposed approach in ( ) produces higher values of FVA. The reason is that keeping the level of NSFR at   or above causes some additional costs (NSFR cost) so the bank needs to increase the amount of debt. Figure   shows the difference between the amounts of expected debt when it is calculated from the standard approach of ( ) and when it is defined as we proposed in ( ). The graphs emphasize that the bank needs more debt when the NSFR costs are included in the total debt calculations.
As a result including NSFR cost in the
FVA calculation framework leads to a higher overall funding cost. 
     
      Taking a closer look at Figure   and comparing the numbers of standard debt and the modified debt reveals that in this example the modified debt is almost two times bigger than the standard debt. 
     
      In another experiment (Table  ), we supposed   and checked the variations of our proposed FVA with different spreads. Here we assume   refers to the debts with the maturity between 6 months to 1 year while   corresponds to the debts with the maturity of more than   year. It can be seen in Table   that although FVA is gradually increasing with the growth of spread, using debts with the maturity of more than 1 year, decreases the funding costs of the contract. 
    <subsection title=" Optimization process &#10;      ">
        In this section we try to formulate our optimization problem as a   described earlier, then we implement the dynamic programming algorithm to solve it. 
       
        The amount of debt required by bank is calculated from equation ( ) which obviously depends on the parameter  .
On the other hand   is determined by the maturity of the debt so the decision of choosing the best maturity for the debt is of great importance as it directly affects the funding costs of the transaction. Since choosing different maturity dates leads to different funding costs, the shortest path problem can be addressed as finding the optimal funding strategy (maturity time ) at each payment date that provides us with the minimum total funding cost. 
       
        In our case the state variable is represented by the simulated interest rate and the decision variable is set as the maturity of the debt.
In this example we assume that the costs can be funded via a debt with the maturity of 6 months, 1 year or 2 years. So there are three decision variables at each payment date.
Suppose that   and the spreads for a 6 month, 1 year and 2 years debt are   and   , respectively.
Then bank needs to decide among one of the following rates
at each payment date: 
         
        Also the cost function   of minimization problem ( ) can be interpreted as the funding cost of the transaction defined in equation ( ). 
       
        Applying dynamic programming method on the above problem reveals that the minimum funding value adjustment is obtained when the debt with 2 years maturity is chosen for all payment dates.
Choosing the funding strategies in this way gives us 
        while the funding costs calculated from ( ) with 1 year maturity debt for all time steps is 
        Comparing these values shows that the optimal FVA is smaller than the normal FVA but still greater than FCA obtained from equation ( ) at which no NSFR cost was included in the calculations: 
         
        The strategy explained above can be easily extended to the whole portfolio where the netting value of all contracts is included in the calculations instead of a single transaction&#8217;s value. Also the decision variables in the optimization process can be increased to finitely many cases including more complex ones. 
      </subsection></section><bibliography /></document>